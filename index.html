<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ALON FART</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="style.css?v=202501110419">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.87.6/lib/index.iife.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@solana/spl-token@0.3.9/lib/index.iife.min.js"></script>
</head>
<body>
    <div class="blockchain-bg"></div>
    
    <!-- DEBUG: Auth modal - seed phrase based authentication -->
    <div id="authModal" class="auth-modal">
        <!-- Fart icons decoration -->
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-1" alt="fart">
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-2" alt="fart">
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-3" alt="fart">
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-4" alt="fart">
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-5" alt="fart">
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-6" alt="fart">
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-7" alt="fart">
        <img src="assets/images/fart-icon.svg" class="fart-icon fart-icon-8" alt="fart">
        
        <div class="auth-modal-content">
            <h2 id="authTitle">ALON FART</h2>
            
            <!-- Login form - seed phrase only -->
            <div id="loginForm" class="auth-form">
                <p class="info-text">Enter your 12-word seed phrase to login</p>
                <textarea id="loginSeedphrase" placeholder="Enter your 12-word seed phrase..." class="auth-input seedphrase-input" rows="3"></textarea>
                <button id="loginBtn" class="pixel-btn auth-btn">LOGIN WITH SEED PHRASE</button>
                <div class="divider"><span>OR</span></div>
                <button id="showSignupBtn" class="pixel-btn secondary-btn">CREATE NEW ACCOUNT</button>
                <button id="howToUseBtn" class="pixel-btn secondary-btn" style="margin-top: 10px; display: none;">HOW TO USE</button>
            </div>
            
            <!-- Signup confirmation - just one button -->
            <div id="signupForm" class="auth-form hidden">
                <p class="info-text">Click below to generate a new account with a unique wallet</p>
                <p class="warning-text">⚠️ You will receive a seed phrase - SAVE IT SAFELY! ⚠️</p>
                <button id="signupBtn" class="pixel-btn auth-btn">GENERATE NEW ACCOUNT</button>
                <button id="backToLoginBtn" class="pixel-btn secondary-btn">BACK TO LOGIN</button>
            </div>
            
            <!-- Seed phrase display after registration -->
            <div id="seedphraseDisplay" class="auth-form hidden">
                <h3>YOUR SEED PHRASE & WALLET</h3>
                <p class="warning-text">⚠️ SAVE THIS SAFELY! THIS IS YOUR ONLY WAY TO LOGIN! ⚠️</p>
                <div id="seedphraseWords" class="seedphrase-display"></div>
                <div id="walletDisplay" class="wallet-info-display">
                    <p><strong>YOUR WALLET ADDRESS:</strong></p>
                    <div id="walletAddressDisplay" class="wallet-address"></div>
                    <p><strong>YOUR PRIVATE KEY:</strong></p>
                    <div id="privateKeyDisplay" class="private-key"></div>
                    <p class="warning-text">⚠️ Import this private key into Phantom to control your funds! ⚠️</p>
                </div>
                <button id="confirmSeedphraseBtn" class="pixel-btn auth-btn">I'VE SAVED EVERYTHING</button>
            </div>
            
            <div id="authMessage" class="auth-message hidden"></div>
        </div>
    </div>
    
    <div class="game-container hidden" id="gameContainer">
        <div class="top-bar">
            <div class="profile-section">
                <a href="https://x.com/i/communities/2012630468185702711" target="_blank" class="pixel-btn twitter-btn" style="background-color: black; color: white; text-decoration: none; display: inline-block;">
                    <span class="pixel-icon">[X]</span>
                    <span>TWITTER</span>
                </a>
                <div id="profilePanel" class="profile-panel">
                    <div class="profile-stats">
                        <h3>PROFILE</h3>
                        <div class="stat-line">
                            <span>USERNAME:</span>
                            <span id="statUsername">---</span>
                        </div>
                        <div class="stat-line">
                            <span>BALANCE:</span>
                            <span id="statBalance">0</span>
                        </div>
                        <div class="stat-line">
                            <span>TOTAL EARNED:</span>
                            <span id="statTotalEarned">0</span>
                        </div>
                        <div class="stat-line">
                            <span>WITHDRAWN:</span>
                            <span id="statWithdrawn">0</span>
                        </div>
                    </div>
                    <!-- DEBUG: Wallet info section in profile -->
                    <div class="wallet-info-section">
                        <h4>YOUR WALLET</h4>
                        <div class="stat-line">
                            <span>ADDRESS:</span>
                            <span id="statWalletAddress" class="wallet-addr-short">---</span>
                        </div>
                        <button id="showPrivateKeyBtn" class="pixel-btn secondary-btn" style="font-size: 6px; margin-top: 8px;">SHOW PRIVATE KEY</button>
                        <div id="privateKeySection" class="hidden" style="margin-top: 8px;">
                            <p style="font-size: 6px; color: #ff6b6b;">⚠️ Never share this!</p>
                            <div id="statPrivateKey" class="private-key-display"></div>
                            <button id="copyPrivateKeyBtn" class="pixel-btn secondary-btn" style="font-size: 6px; margin-top: 4px;">COPY</button>
                        </div>
                    </div>
                    <div class="claim-history">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <h4>CLAIM HISTORY</h4>
                            <button id="refreshHistoryBtn" class="pixel-btn refresh-btn" style="font-size: 6px; padding: 4px 8px;">↻</button>
                        </div>
                        <div id="withdrawalHistoryList" class="withdrawal-list">
                            <div class="no-withdrawals">No claims yet</div>
                        </div>
                    </div>
                    <button id="withdrawBtn" class="pixel-btn withdraw-btn">CLAIM REWARDS</button>
                    <button id="logoutBtn" class="pixel-btn secondary-btn">LOGOUT</button>
                </div>
            </div>
            <div class="blockchain-stats">
                <div class="stat-item">
                    <span class="stat-label">TOKENS:</span>
                    <span class="stat-value" id="tokenBalance">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">EARNED:</span>
                    <span class="stat-value" id="tokensEarned">0</span>
                </div>
            </div>
        </div>

        <div class="coin-display">
            <div class="coin-wrapper">
                <span id="coinCount">0</span>
                <span class="coin-label">COINS</span>
            </div>
        </div>

        <div class="main-game">
            <div class="cube-container" id="cubeContainer">
            </div>
        </div>

        <!-- CA Address Display -->
        <div class="ca-address">4Mahw3opSb5LBKeZx3JfjKjmeMTBZQSESFkcLCZypump</div>

        <div class="shop-panel" id="shopPanel">
            <h2>[UPGRADES]</h2>
            <div class="current-tool">
                <p>CURRENT MINER:</p>
                <h3 id="currentToolName">Genesis Miner</h3>
                <p class="tool-stats">POWER: <span id="currentHits">1</span> | YIELD: <span id="currentCoins">1</span> COINS</p>
            </div>
            
            <div class="blockchain-info">
                <div class="info-line">
                    <span>[>] HASH RATE:</span>
                    <span id="hashRate">1.0 H/s</span>
                </div>
                <div class="info-line">
                    <span>[#] TOTAL MINED:</span>
                    <span id="totalMined">0 COINS</span>
                </div>
            </div>
            
            <div class="tools-list">
                <div class="tool-item locked" data-tool="0">
                    <div class="tool-info">
                        <h4>THE GUST OF ALON</h4>
                        <p class="tool-description">1 CLICK → 750 COINS</p>
                        <p class="tool-cost">FREE</p>
                    </div>
                    <button class="buy-btn" disabled>EQUIPPED</button>
                </div>

                <div class="tool-item locked" data-tool="1">
                    <div class="tool-info">
                        <h4>THE AFTERSHOCK</h4>
                        <p class="tool-description">1 CLICK → 1,500 COINS</p>
                        <p class="tool-cost">419,999 COINS</p>
                    </div>
                    <button class="buy-btn">BUY</button>
                </div>

                <div class="tool-item locked" data-tool="2">
                    <div class="tool-info">
                        <h4>THE FULL SYSTEM FLUSH</h4>
                        <p class="tool-description">1 CLICK → 3,500 COINS</p>
                        <p class="tool-cost">999,999 COINS</p>
                    </div>
                    <button class="buy-btn">BUY</button>
                </div>
            </div>
        </div>
    
    <!-- DEBUG: Claim Rewards Modal - sends entire balance to user's generated wallet -->
    <div id="claimModal" class="auth-modal hidden">
        <div class="auth-modal-content">
            <h2>CLAIM REWARDS</h2>
            <div class="auth-form">
                <p class="info-text">Claim your mined tokens to your wallet</p>
                <div class="stat-line">
                    <span>YOUR BALANCE:</span>
                    <span id="claimBalance">0</span>
                </div>
                <div class="stat-line">
                    <span>YOUR WALLET:</span>
                    <span id="claimWalletAddress" class="wallet-addr-short">---</span>
                </div>
                <p class="info-text" style="margin-top: 15px;">Tokens will be sent directly to your wallet. You can import your private key into Phantom to access your funds.</p>
                <button id="confirmClaimBtn" class="pixel-btn auth-btn">CLAIM ALL TOKENS</button>
                <button id="cancelClaimBtn" class="pixel-btn secondary-btn">CANCEL</button>
                <div id="claimMessage" class="auth-message hidden"></div>
                <p class="warning-text">⚠️ Make sure you have saved your private key! ⚠️</p>
            </div>
        </div>
    </div>

    <!-- DEBUG: Instructions Modal - How to use popup -->
    <div id="instructionsModal" class="auth-modal hidden">
        <div class="auth-modal-content" style="max-width: 550px;">
            <h2>HOW TO USE ALON FART</h2>
            <div class="instructions-content">
                <div class="instruction-section">
                    <h4>Getting Started</h4>
                    <ol>
                        <li><strong>Create Account:</strong> Click "CREATE NEW ACCOUNT" to generate a new wallet with a 12-word seed phrase.</li>
                        <li><strong>Save Your Seed Phrase:</strong> Write down your 12 words and private key - this is your ONLY way to login!</li>
                        <li><strong>Login:</strong> Enter your 12-word seed phrase to access your account.</li>
                    </ol>
                </div>
                <div class="instruction-section">
                    <h4>How to Play</h4>
                    <ol>
                        <li><strong>Click the Character:</strong> Click on ALON to earn coins (750 coins per click).</li>
                        <li><strong>Wait for Cooldown:</strong> There's a 2-second cooldown between clicks.</li>
                        <li><strong>Upgrade Your Miner:</strong> Use coins to buy upgrades for more coins per click!</li>
                    </ol>
                </div>
                <div class="instruction-section">
                    <h4>Upgrades</h4>
                    <ul>
                        <li><strong>The Gust of Alon:</strong> 750 coins/click (FREE - Starting tool)</li>
                        <li><strong>The Aftershock:</strong> 1,500 coins/click (Cost: 419,999 coins)</li>
                        <li><strong>The Full System Flush:</strong> 3,500 coins/click (Cost: 999,999 coins)</li>
                    </ul>
                </div>
                <div class="instruction-section">
                    <h4>Claiming Rewards</h4>
                    <ol>
                        <li>Click the <strong>CLAIM REWARDS</strong> button in your profile.</li>
                        <li>Tokens are sent directly to your generated Solana wallet.</li>
                        <li>Import your private key into <strong>Phantom Wallet</strong> to access your funds.</li>
                    </ol>
                </div>
                <div class="warning-text">Never share your seed phrase or private key with anyone!</div>
            </div>
            <button id="closeInstructionsBtn" class="pixel-btn auth-btn" style="margin-top: 15px;">GOT IT!</button>
        </div>
    </div>

    <script type="module" src="game.js?v=202501110419"></script>
</body>
</html>
